<IfModule mod_ssl.c>
<VirtualHost *:443>
 ServerName  my.server.name
 ServerAlias  my.server.name
 DocumentRoot /path/to/server-skeleton/

 # Line below assumes that the pytho virtual environment is set up in server-skeleton/.venv
 WSGIDaemonProcess etes python-path=/path/to/server-skeleton/ python-home=/path/to/server-skeleton/.venv
 WSGIProcessGroup etes
 WSGIScriptAlias / /path/to/server-skeleton/etesync_server/wsgi.py
 WSGIPassAuthorization On

 # To prevent any permission issues, it is best that the entire folder
 # is chowned by the same group (www-data) that apache runs under. So:
 # sudo chown -R :www-data /path/to/server-skeleton
 
 # Also apache needs write access to the database file. So:
 # sudo chmod 664 /path/to/server-skeleton/db.sqlite3
 
 <directory /path/to/server-skeleton/>
   AllowOverride all
   Require all granted
   Options FollowSymlinks
 </directory>

 <directory /path/to/server-skeleton/etesync_server/>
 <Files wsgi.py>
  Require all granted
 </Files>
 </directory>

 # Below are the standard lines for Letsencrypt certificates
 SSLCertificateFile /path/to/certificate/file
 SSLCertificateKeyFile /path/to/certificate/keyfile
 Include /etc/letsencrypt/options-ssl-apache.conf
</VirtualHost>
</IfModule>


